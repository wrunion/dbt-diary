### Authentication (documentation of a WIP)

Our app has three major aspects to authentication: 
1. A "user" table in the database
1. A JWT token-based auth session using the "cookie-session" Express module (WIP)
1. An extra layer of csurf protection using the csurf module (TODO)

### 1. The database (done!)

The Rose City Resource Guide was already set up to do email/password login, and to authenticate users against a table in the Postgres database on Heroku. It was pretty easy to replicate that here. 

### 2. JWT Auth tokens: WIP

These will be generated by our app. We'll assign one to a user when we authenticate them at the beginning of their session, and we'll destroy it on logout. 

This functionality is already in place; we just need to come up with the actual tokens, and a method of comparing them.

### 3. CSURF Protection: TODO
I haven't started this one yet, but from the documentation it seems fairly straightforward. 

TODO: Refer to Elle's API documentation and the Express docs to implement this security layer. 

### More details
A backend flow will look something like: 

**Step 1: We accept email and password, and authenticate user** (done)

**Step 2: If they're a valid user, we respond with a JWT auth token that we set as a cookie, using cookie-sessions** (in progress, see below)

**Step 3: Using middleware, check the user's cookies on each request and validate them using the JWT token** (in progress)
- Already done: Express integration. I created a function that reads an "authToken" cookie and compares it against a saved value
- I applied that middleware to appropriate routes, so now relevant routes are protected
- TODO: Right now the function just uses a dummy string. We need to create JWT tokens, and replace the dummy string.

**Step 4: On logout, destroy the session and clear their cookies** (done)